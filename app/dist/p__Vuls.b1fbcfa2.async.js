(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[970],{90631:function($,x,e){"use strict";e.d(x,{Z:function(){return F}});var j=e(28991),Z=e(67294),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"},I=O,C=e(27029),D=function(S,p){return Z.createElement(C.Z,(0,j.Z)((0,j.Z)({},S),{},{ref:p,icon:I}))};D.displayName="DownloadOutlined";var F=Z.forwardRef(D)},23201:function($,x,e){"use strict";e.r(x),e.d(x,{default:function(){return Q}});var j=e(57663),Z=e(71577),O=e(62350),I=e(75443),C=e(59250),D=e(13013),F=e(30887),E=e(99210),S=e(34792),p=e(48086),f=e(3182),W=e(94043),a=e.n(W),z=e(67294),Y=e(57254),b=e(90631),V=e(93046),P=e(8870),w=e(48971),H=e(30381),M=e.n(H);function N(l){return R.apply(this,arguments)}function R(){return R=(0,f.Z)(a().mark(function l(r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w.WY)("/api/vul/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},params:(0,P.Z)({},r)}));case 1:case"end":return t.stop()}},l)})),R.apply(this,arguments)}function A(l){return T.apply(this,arguments)}function T(){return T=(0,f.Z)(a().mark(function l(r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w.WY)("/api/vul/"+r.id+"/",{method:"PUT",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},data:{vul_status:r.vul_status}}));case 1:case"end":return t.stop()}},l)})),T.apply(this,arguments)}function k(l){return U.apply(this,arguments)}function U(){return U=(0,f.Z)(a().mark(function l(r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(r.id),t.abrupt("return",(0,w.WY)("/api/vul/"+r.id+"/",{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))}}));case 2:case"end":return t.stop()}},l)})),U.apply(this,arguments)}function G(l){return B.apply(this,arguments)}function B(){return B=(0,f.Z)(a().mark(function l(r){return a().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,w.WY)("/api/vul_download/",{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},data:r,responseType:"blob"}).then(function(y){console.log(r);var g=URL.createObjectURL(new Blob([y])),h=r.report_center+"_"+r.report_systemname+"_No"+r.report_no+".docx",o=document.createElement("a");o.href=g,o.download=h,o.click(),URL.revokeObjectURL(g)}));case 1:case"end":return t.stop()}},l)})),B.apply(this,arguments)}function K(){return L.apply(this,arguments)}function L(){return L=(0,f.Z)(a().mark(function l(){return a().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.abrupt("return",(0,w.WY)("/api/vuls_download/",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access"))},responseType:"blob"}).then(function(t){var y=URL.createObjectURL(new Blob([t])),g="Savior_\u6F0F\u6D1E\u5217\u8868_"+M()().format("LL")+".xls",h=document.createElement("a");h.href=y,h.download=g,h.click(),URL.revokeObjectURL(y)}));case 1:case"end":return v.stop()}},l)})),L.apply(this,arguments)}var i=e(85893),J=function(){var r=(0,z.useRef)(),v=function(){var o=(0,f.Z)(a().mark(function c(n){var u,m;return a().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=p.default.loading("\u6B63\u5728\u63D0\u4EA4"),m="2",d.next=4,A({id:n,vul_status:m});case 4:return u(),p.default.success("\u590D\u6D4B\u6210\u529F\uFF0C\u5DF2\u4FEE\u590D\uFF01"),r.current.reload(),d.abrupt("return",!0);case 8:case"end":return d.stop()}},c)}));return function(n){return o.apply(this,arguments)}}(),t=function(){var o=(0,f.Z)(a().mark(function c(n){var u,m;return a().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return u=p.default.loading("\u6B63\u5728\u63D0\u4EA4"),m="1",d.next=4,A({id:n,vul_status:m});case 4:return u(),p.default.error("\u590D\u6D4B\u6210\u529F\uFF0C\u672A\u4FEE\u590D\uFF01"),r.current.reload(),d.abrupt("return",!0);case 8:case"end":return d.stop()}},c)}));return function(n){return o.apply(this,arguments)}}(),y=function(){var o=(0,f.Z)(a().mark(function c(n){var u;return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=p.default.loading("\u6B63\u5728\u63D0\u4EA4"),s.next=3,G(n);case 3:return u(),r.current.reload(),s.abrupt("return",!0);case 6:case"end":return s.stop()}},c)}));return function(n){return o.apply(this,arguments)}}(),g=function(){var o=(0,f.Z)(a().mark(function c(n){var u;return a().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return u=p.default.loading("\u6B63\u5728\u63D0\u4EA4"),s.next=3,k(n);case 3:return u(),p.default.success("\u6F0F\u6D1E\u5220\u9664\u6210\u529F\uFF01"),r.current.reload(),s.abrupt("return",!0);case 7:case"end":return s.stop()}},c)}));return function(n){return o.apply(this,arguments)}}(),h=[{title:"\u6240\u5C5E\u9879\u76EE",dataIndex:"report_center",valueType:"textarea"},{title:"\u7CFB\u7EDF",dataIndex:"report_systemname",valueType:"textarea"},{title:"\u62A5\u544A\u7F16\u53F7",dataIndex:"report_no",valueType:"textarea"},{title:"\u53D1\u73B0\u4EBA",dataIndex:"report_author",valueType:"textarea"},{title:"\u53D1\u73B0\u65F6\u95F4",dataIndex:"report_end_time",valueType:"date",search:!1},{title:"\u6F0F\u6D1E\u7C7B\u578B",dataIndex:"vul_type_name",valueType:"textarea",search:!1},{title:"\u6F0F\u6D1E\u540D\u79F0",dataIndex:"vul_name",valueType:"textarea",search:!1},{title:"\u6F0F\u6D1E\u7B49\u7EA7",dataIndex:"vul_level",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u65e0\u98ce\u9669",status:"None"},1:{text:"\u4F4E\u5371",status:"Success"},2:{text:"\u4E2D\u5371",status:"Warning"},3:{text:"\u9AD8\u5371",status:"Error"}}},{title:"\u6F0F\u6D1EURL",dataIndex:"vul_url",valueType:"textarea",ellipsis:!0,copyable:!0},{title:"\u6F0F\u6D1E\u72B6\u6001",dataIndex:"vul_status",filters:!0,onFilter:!0,valueEnum:{0:{text:"\u65B0\u53D1\u73B0",status:"Warning"},1:{text:"\u672A\u4FEE\u590D",status:"Error"},2:{text:"\u5DF2\u4FEE\u590D",status:"Success"}}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(c,n){return[(0,i.jsx)(D.Z,{overlay:(0,i.jsxs)(E.Z,{children:[(0,i.jsx)(E.Z.Item,{onClick:function(){v(n.id)},children:"\u5DF2\u4FEE\u590D"},"repairUpdate"),(0,i.jsx)(E.Z.Item,{onClick:function(){t(n.id)},children:"\u672A\u4FEE\u590D"},"repairUpdate")]}),children:(0,i.jsxs)("a",{children:["\u590D\u6D4B ",(0,i.jsx)(Y.Z,{})]})}),(0,i.jsx)("a",{onClick:function(){y(n)},children:"\u4E0B\u8F7D"},"download"),(0,i.jsx)(I.Z,{title:"\u786E\u8BA4\u5220\u9664\u8BE5\u6F0F\u6D1E\u5417?",okText:"\u662F",cancelText:"\u5426",onConfirm:function(){g(n)},children:(0,i.jsx)("a",{children:"\u5220\u9664"})},"norepairDelete")]}}];return(0,i.jsx)(V.ZP,{actionRef:r,rowKey:"key",search:{labelWidth:120},request:N,columns:h,toolBarRender:function(){return[(0,i.jsx)(Z.Z,{type:"primary",icon:(0,i.jsx)(b.Z,{}),onClick:K,children:"\u5BFC\u51FA\u6570\u636E"},"out")]}})},Q=J}}]);
